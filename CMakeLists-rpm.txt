# At least for now, this is can't be built as a standalone project. Ie,
# it can only be built as a part of rpm build tree.
add_library(rpmpgp_legacy OBJECT)

option(WITH_LEGACY_OPENPGP "Use legacy OpenPGP parser (DEPRECATED)" OFF)

ADD_DEFINITIONS (-DPGPR_RPM_INTREE)

target_sources(rpmpgp_legacy PRIVATE
	pgpr.h pkt.c item.c alg.c verify.c parse.c armor.c rpmglue.c
	error.c pubkey.c merge.c util.c
)
if (WITH_OPENSSL)
	find_package(OpenSSL 1.0.2 REQUIRED)
	target_sources(rpmpgp_legacy PRIVATE openssl.c)
else()
	target_sources(rpmpgp_legacy PRIVATE libgcrypt.c)
endif()
target_include_directories(rpmpgp_legacy PRIVATE ${CMAKE_SOURCE_DIR}/rpmio)
target_include_directories(rpmpgp_legacy PRIVATE ${Intl_INCLUDE_DIRS})

